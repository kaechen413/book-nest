<div class="container booking-user-container">

  <!-- top filters -->
  <div class="booking-filters d-flex justify-content-around mb-4">
    <%= link_to "Pending Requests", owner_bookings_path(status: "pending"), class: "btn #{params[:status] == "pending" || params[:status].nil? ? 'btn-dark' : 'btn-outline-dark'}" %>
    <%= link_to "Current Bookings", owner_bookings_path(status: "accepted"), class: "btn #{params[:status] == "accepted" ? 'btn-dark' : 'btn-outline-dark'}" %>
    <%= link_to "Past Bookings", owner_bookings_path(status: "past"), class: "btn #{params[:status] == "past" ? 'btn-dark' : 'btn-outline-dark'}" %>
  </div>

  <!-- dynamic title -->
  <h1 class="text-center"><%= (params[:status] || "pending").capitalize %> Requests</h1>

  <!-- bookings -->
  <% @bookings_as_owner.each do |booking| %>
    <div class="booking-card custom-rounded">
      <%= image_tag "https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/skateboard.jpg" %>

      <div class="booking-card-infos">
        <div class="d-flex justify-content-between mb-0">
          <h3><%= booking.book_offer.book.title %></h3>
          <h3><i class="fa-solid fa-map-pin"></i> <%= booking.book_offer.user.address %></h3>
        </div>

        <h2 class="booking-status <%= booking.status %>"><%= booking.status.capitalize %></h2>
        <h3><%= booking.starting_date.strftime("%b %d, %Y") %> - <%= booking.ending_date.strftime("%b %d, %Y") %></h3>
        <h3><%= booking.book_offer.user.user_name %>'s Book</h3>

        <% if booking.status == "pending" %>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <%= button_to "Accept", [:owner, booking], method: :patch, params: { status: "accepted" }, class: "btn btn-success btn-sm" %>
            <%= button_to "Decline", [:owner, booking], method: :patch, params: { status: "rejected" }, class: "btn btn-danger btn-sm" %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- My Shared Library section -->
  <hr class="my-4">
  <h2 class="text-center mt-4">My Shared Library</h2>

  <% @my_books.each do |book_offer| %>
    <div class="booking-card custom-rounded">
      <%= image_tag book_offer.book.image_url, alt: book_offer.book.title %>
      <div class="booking-card-infos">
        <h3><%= book_offer.book.title %></h3>
        <p><strong>Author:</strong> <%= book_offer.book.author %></p>
        <p><strong>Published:</strong> <%= book_offer.book.published_year %></p>
        <p><strong>Location:</strong> <%= book_offer.user.address %></p>
      </div>
    </div>
  <% end %>

</div>
a
